<<<<<<< HEAD
---
title: "Covid-19 in Egypt"
date:  "Last update: `r Sys.time()`"
author: Sherif Embarak^[https://github.com/Sherif-Embarak/]
output:
  flexdashboard::flex_dashboard:
    theme: lumen
    social: menu
    source: embed
    vertical_layout: scroll
    orientation: rows
    self_contained: false
---


This dashboard has been created according to <a href="https://www.worldometers.info/"> worldometers.info </a> design. In order to compensate with the lack of real time statistical data in Egypt, the given data below will be updated daily at 10:00 PM (Cairo Time).</br>
Stay Home, Stay Safe.</br>


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
rm(list=ls(all=TRUE))
options(stringsAsFactors = FALSE)
library(ggplot2)
library(plotly)
library(flexdashboard)
library(DT)
library(plotly)
library(knitr)
library(lubridate)
library(crosstalk)

setwd("D:/work/git corona/")
df <- read.csv("eg_covid.csv")
df$Day <- mdy(df$Day)
df$Day <- paste(day(df$Day) , months.Date(df$Day) )
df$Curfew <- as.character(df$Curfew)
df <- df[,1:8]
total_cases <- df$Total.Cases[nrow(df)]
total_deaths <- df$Total.Deaths[nrow(df)]
total_recovered <- df$Total.Recovered[nrow(df)]
closed <- total_deaths+total_recovered
active <- total_cases - closed
library(crosstalk)
df$Day <- factor(df$Day, levels = df$Day)
hk <- highlight_key(df, ~Total.Cases)

chart1 <-ggplotly(ggplot(hk, aes(x=Day, y=New.Cases, fill=Curfew)) + 
  geom_bar(width = 0.3, stat = "identity")+scale_fill_manual(values = c("#6698FF", "#153E7E"))+
  theme(axis.text.x = element_text(angle = 70, hjust = 1))) %>%
       highlight(off = "plotly_relayout")

chart2 <-ggplotly(ggplot(hk, aes(x=Day, y=New.Deaths, fill=Curfew)) + 
  geom_bar(width = 0.3, stat = "identity")+scale_fill_manual(values = c("#6698FF", "#153E7E"))+
  theme(axis.text.x = element_text(angle = 70, hjust = 1))) %>%
       highlight(off = "plotly_relayout")

chart3 <-ggplotly(ggplot(hk, aes(x=Day, y=New.Recovered, fill=Curfew)) + 
  geom_bar(width = 0.3, stat = "identity")+scale_fill_manual(values = c("#6698FF", "#153E7E"))+
  theme(axis.text.x = element_text(angle = 70, hjust = 1))) %>%
       highlight(off = "plotly_relayout")

chart4 <- ggplotly(ggplot(data=hk, aes(x=Day, y=Total.Cases, group=1))+
 geom_line(color="#FF9900", size=1)+theme(axis.text.x = element_text(angle = 70, hjust = 1))+
  geom_point(color="#FF9900")) %>%
       highlight(off = "plotly_relayout")

chart5 <- ggplotly(ggplot(data=hk, aes(x=Day, y=Total.Deaths, group=1))+
 geom_line(color="#00DDDD", size=1)+theme(axis.text.x = element_text(angle = 70, hjust = 1))+
  geom_point(color="#00DDDD")) %>%
       highlight(off = "plotly_relayout")

chart6 <- ggplotly(ggplot(data=hk, aes(x=Day, y=Total.Recovered, group=1))+
 geom_line(color="#33CCFF", size=1)+theme(axis.text.x = element_text(angle = 70, hjust = 1))+
  geom_point(color="#33CCFF"))%>%
       highlight(off = "plotly_relayout")


```

Dashboard
=======================================================================

Row
-----------------------------------------------------------------------

### Total Coronavirus Cases in Egypt

```{r, echo=FALSE}
valueBox(total_cases, icon = "fa-area-chart")
```

### Total Coronavirus Deaths in Egypt 

```{r, echo=FALSE}
valueBox(total_deaths, icon = "fa-area-chart" , color="warning")
```

### Total Coronavirus Recovered Cases in Egypt

```{r, echo=FALSE}
valueBox(total_recovered, icon = "fa-area-chart" , color = "#00DDDD")
```

Row
-----------------------------------------------------------------------

### Cases which had an outcome `r "</br>"` `r paste0("Deaths/Discharged : ",   total_deaths, " (", round((total_deaths/closed)*100,1),"%)" )` `r "</br>"` `r paste0("Recovered/Discharged : ",   total_recovered, " (", round((total_recovered/closed)*100,1),"%)" )` 

```{r, echo=FALSE}
valueBox(paste("Closed Cases: ",closed))
```

### Currently Infected Patients

```{r, echo=FALSE}
valueBox(paste("Active Cases: ",active))
```

Row1{data-width=20}
-------------------------------------
    
### Distibution of Cases
    
```{r, echo=FALSE, warning=FALSE,message=FALSE,results='asis',fig.show='asis'}
DT::datatable(hk,class = 'cell-border stripe hover compact', rownames = FALSE , options = list(pageLength = 50,order = list(2, 'desc')))%>%
  formatStyle('New.Cases', backgroundColor =  '#FFEEAA') %>% 
  formatStyle('New.Deaths',backgroundColor =  'red')%>%
  formatStyle(names(df),fontWeight = 'bold')%>%
  formatStyle('Curfew',  backgroundColor = styleEqual(c(0, 1), c('#a6cee3', '#1f78b4')))%>%
       highlight()
```
   
Row2
-------------------------------------
    
### Confirmed Cases per day
    
```{r, echo=FALSE, warning=FALSE,message=FALSE,results='asis',fig.show='asis'}
chart1
```
    
### Deaths per day

```{r, echo=FALSE, warning=FALSE,message=FALSE,results='asis',fig.show='asis'}
chart2
```

### Recovered Cases per day

```{r, echo=FALSE, warning=FALSE,message=FALSE,results='asis',fig.show='asis'}
chart3
```

Row3
-------------------------------------
    
### Total Confirmed Cases
    
```{r, echo=FALSE, warning=FALSE,message=FALSE,results='asis',fig.show='asis'}
chart4
```
    
### Total Deaths

```{r, echo=FALSE, warning=FALSE,message=FALSE,results='asis',fig.show='asis'}
chart5
```

### Total Recovered

```{r, echo=FALSE, warning=FALSE,message=FALSE,results='asis',fig.show='asis'}
chart6
=======
---
title: "Covid-19 in Egypt"
date:  "Last update: `r Sys.time()`"
author: Sherif Embarak^[https://github.com/Sherif-Embarak/]
output:
  flexdashboard::flex_dashboard:
    theme: lumen
    social: menu
    source: embed
    vertical_layout: scroll
    orientation: rows
    self_contained: false
---


This dashboard has been created according to <a href="https://www.worldometers.info/"> worldometers.info </a> design. In order to compensate with the lack of real time statistical data in Egypt, the given data below will be updated daily at 10:00 PM (Cairo Time).</br>
Stay Home, Stay Safe.</br>


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
rm(list=ls(all=TRUE))
options(stringsAsFactors = FALSE)
library(ggplot2)
library(plotly)
library(flexdashboard)
library(DT)
library(plotly)
library(knitr)
library(lubridate)
library(crosstalk)

setwd("D:/work/git corona/")
df <- read.csv("eg_covid.csv")
df$Day <- mdy(df$Day)
df$Day <- paste(day(df$Day) , months.Date(df$Day) )
df$Curfew <- as.character(df$Curfew)
df <- df[,1:8]
total_cases <- df$Total.Cases[nrow(df)]
total_deaths <- df$Total.Deaths[nrow(df)]
total_recovered <- df$Total.Recovered[nrow(df)]
closed <- total_deaths+total_recovered
active <- total_cases - closed
library(crosstalk)
df$Day <- factor(df$Day, levels = df$Day)
hk <- highlight_key(df, ~Total.Cases)

chart1 <-ggplotly(ggplot(hk, aes(x=Day, y=New.Cases, fill=Curfew)) + 
  geom_bar(width = 0.3, stat = "identity")+scale_fill_manual(values = c("#6698FF", "#153E7E"))+
  theme(axis.text.x = element_text(angle = 70, hjust = 1))) %>%
       highlight(off = "plotly_relayout")

chart2 <-ggplotly(ggplot(hk, aes(x=Day, y=New.Deaths, fill=Curfew)) + 
  geom_bar(width = 0.3, stat = "identity")+scale_fill_manual(values = c("#6698FF", "#153E7E"))+
  theme(axis.text.x = element_text(angle = 70, hjust = 1))) %>%
       highlight(off = "plotly_relayout")

chart3 <-ggplotly(ggplot(hk, aes(x=Day, y=New.Recovered, fill=Curfew)) + 
  geom_bar(width = 0.3, stat = "identity")+scale_fill_manual(values = c("#6698FF", "#153E7E"))+
  theme(axis.text.x = element_text(angle = 70, hjust = 1))) %>%
       highlight(off = "plotly_relayout")

chart4 <- ggplotly(ggplot(data=hk, aes(x=Day, y=Total.Cases, group=1))+
 geom_line(color="#FF9900", size=1)+theme(axis.text.x = element_text(angle = 70, hjust = 1))+
  geom_point(color="#FF9900")) %>%
       highlight(off = "plotly_relayout")

chart5 <- ggplotly(ggplot(data=hk, aes(x=Day, y=Total.Deaths, group=1))+
 geom_line(color="#00DDDD", size=1)+theme(axis.text.x = element_text(angle = 70, hjust = 1))+
  geom_point(color="#00DDDD")) %>%
       highlight(off = "plotly_relayout")

chart6 <- ggplotly(ggplot(data=hk, aes(x=Day, y=Total.Recovered, group=1))+
 geom_line(color="#33CCFF", size=1)+theme(axis.text.x = element_text(angle = 70, hjust = 1))+
  geom_point(color="#33CCFF"))%>%
       highlight(off = "plotly_relayout")


```

Dashboard
=======================================================================

Row
-----------------------------------------------------------------------

### Total Coronavirus Cases in Egypt

```{r, echo=FALSE}
valueBox(total_cases, icon = "fa-area-chart")
```

### Total Coronavirus Deaths in Egypt 

```{r, echo=FALSE}
valueBox(total_deaths, icon = "fa-area-chart" , color="warning")
```

### Total Coronavirus Recovered Cases in Egypt

```{r, echo=FALSE}
valueBox(total_recovered, icon = "fa-area-chart" , color = "#00DDDD")
```

Row
-----------------------------------------------------------------------

### Cases which had an outcome `r "</br>"` `r paste0("Deaths/Discharged : ",   total_deaths, " (", round((total_deaths/closed)*100,1),"%)" )` `r "</br>"` `r paste0("Recovered/Discharged : ",   total_recovered, " (", round((total_recovered/closed)*100,1),"%)" )` 

```{r, echo=FALSE}
valueBox(paste("Closed Cases: ",closed))
```

### Currently Infected Patients

```{r, echo=FALSE}
valueBox(paste("Active Cases: ",active))
```

Row1{data-width=20}
-------------------------------------
    
### Distibution of Cases
    
```{r, echo=FALSE, warning=FALSE,message=FALSE,results='asis',fig.show='asis'}
DT::datatable(hk,class = 'cell-border stripe hover compact', rownames = FALSE , options = list(pageLength = 50,order = list(2, 'desc')))%>%
  formatStyle('New.Cases', backgroundColor =  '#FFEEAA') %>% 
  formatStyle('New.Deaths',backgroundColor =  'red')%>%
  formatStyle(names(df),fontWeight = 'bold')%>%
  formatStyle('Curfew',  backgroundColor = styleEqual(c(0, 1), c('#a6cee3', '#1f78b4')))%>%
       highlight()
```
   
Row2
-------------------------------------
    
### Confirmed Cases per day
    
```{r, echo=FALSE, warning=FALSE,message=FALSE,results='asis',fig.show='asis'}
chart1
```
    
### Deaths per day

```{r, echo=FALSE, warning=FALSE,message=FALSE,results='asis',fig.show='asis'}
chart2
```

### Recovered Cases per day

```{r, echo=FALSE, warning=FALSE,message=FALSE,results='asis',fig.show='asis'}
chart3
```

Row3
-------------------------------------
    
### Total Confirmed Cases
    
```{r, echo=FALSE, warning=FALSE,message=FALSE,results='asis',fig.show='asis'}
chart4
```
    
### Total Deaths

```{r, echo=FALSE, warning=FALSE,message=FALSE,results='asis',fig.show='asis'}
chart5
```

### Total Recovered

```{r, echo=FALSE, warning=FALSE,message=FALSE,results='asis',fig.show='asis'}
chart6
>>>>>>> b464678c708971cb9da2cfd6139d547f1a22f26c
```